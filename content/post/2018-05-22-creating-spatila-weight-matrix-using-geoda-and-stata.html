---
title: Creating spatila weight matrix using Geoda and Stata
author: Chao
date: '2018-05-22'
slug: creating-spatila-weight-matrix-using-geoda-and-stata
categories:
  - ArcGIS
  - Matlab
tags: []
---



<p>先使用Geoda生成gal文件，然后使用下面的stata commands来生成空间加权矩阵文件</p>
<p>ssc install spwmatrix</p>
<ul>
<li>remove the first and last lines of the txt file spwmatrix import using C:*USER*_file.gal, wname(weights) xport(weights, txt)</li>
</ul>
<p>insheet using “C:*USER*.txt“, delim(” “) clear save”weights.dta&quot;</p>
<p>gen id = _n order id, first</p>
<p>rename v(#) m(#) rename v(##) m(##) rename v(###) m(###)</p>
<p>gsort -id drop id</p>
<p>gen id = _n order id, first</p>
<p>Source： <a href="https://drive.google.com/file/d/0By5qMMVfcc4jRHJfNExjUV9pd2c/view" class="uri">https://drive.google.com/file/d/0By5qMMVfcc4jRHJfNExjUV9pd2c/view</a> <a href="https://www.youtube.com/watch?v=54HoO0KgWLQ&amp;t=1178s&amp;index=2&amp;list=FLmPcw83WfcCSrQxTt4FSI_Q" class="uri">https://www.youtube.com/watch?v=54HoO0KgWLQ&amp;t=1178s&amp;index=2&amp;list=FLmPcw83WfcCSrQxTt4FSI_Q</a></p>
