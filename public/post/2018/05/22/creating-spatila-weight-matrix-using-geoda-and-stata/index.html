<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Creating spatila weight matrix using Geoda and Stata - ChaosEco</title>
    <meta property="og:title" content="Creating spatila weight matrix using Geoda and Stata - ChaosEco">
    

    
      
    

    

    
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">ChaosEco</a></h1>

<p class="tagline">Personal learning notes</p>

      <nav class="menu">
        <input id="menu-check" type="checkbox" />
        <label id="menu-label" for="menu-check" class="unselectable">
          <span class="icon close-icon">✕</span>
          <span class="icon open-icon">☰</span>
          <span class="text">Menu</span>
        </label>
        <ul>
        
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/about/">About</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/tags/">Tags</a></li>
        
        <li><a href="/index.xml">Subscribe</a></li>
        
        
        </ul>
      </nav>
    </header>

    <article class="main">
      <header class="title">
      
<h1>Creating spatila weight matrix using Geoda and Stata</h1>

<h3>Chao
  /  2018-05-22</h3>
<hr>


      </header>



<p>先使用Geoda生成gal文件，然后使用下面的stata commands来生成空间加权矩阵文件</p>
<p>ssc install spwmatrix</p>
<ul>
<li>remove the first and last lines of the txt file spwmatrix import using C:*USER*_file.gal, wname(weights) xport(weights, txt)</li>
</ul>
<p>insheet using “C:*USER*.txt“, delim(” “) clear save”weights.dta&quot;</p>
<p>gen id = _n order id, first</p>
<p>rename v(#) m(#) rename v(##) m(##) rename v(###) m(###)</p>
<p>gsort -id drop id</p>
<p>gen id = _n order id, first</p>
<p>Source： <a href="https://drive.google.com/file/d/0By5qMMVfcc4jRHJfNExjUV9pd2c/view" class="uri">https://drive.google.com/file/d/0By5qMMVfcc4jRHJfNExjUV9pd2c/view</a> <a href="https://www.youtube.com/watch?v=54HoO0KgWLQ&amp;t=1178s&amp;index=2&amp;list=FLmPcw83WfcCSrQxTt4FSI_Q" class="uri">https://www.youtube.com/watch?v=54HoO0KgWLQ&amp;t=1178s&amp;index=2&amp;list=FLmPcw83WfcCSrQxTt4FSI_Q</a></p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2018/05/20/matlab-spatial-panels-reference-to-non-existent-field-parm/">Matlab spatial panels - Reference to non-existent field &#39;parm&#39;</a></span>
  <span class="nav-next"></span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  

  
  <hr>
  <div class="copyright"><a href="https://github.com/chaoseco">Github</a> | <a href="https://twitter.com/chaoseco">Twitter</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

